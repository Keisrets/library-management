<div th:replace="fragments/top"></div>
<head>
    <title th:text="Loans"></title>
    <div th:replace="fragments/includes"></div>
</head>
<body>
<div th:replace="fragments/navbar"></div>
<div class="container" style="margin-top: 50px; margin-bottom: 100px;">
    <h1 style="text-align: center;">Loans</h1>
    <form style="margin-bottom: 50px;" th:action="@{/lib-dashboard/loans/page/1/}" method="GET">
        <div class="input-group">
            <input style="height: 50px;" type="text" name="phrase" class="form-control" placeholder="Search loan by first/last name" th:value="${phrase}">
            <div class="input-group-append">
                <input style="width:100px;" class="btn btn-secondary" type="submit" value="Search">
            </div>
        </div>
    </form>
    <table th:unless="${loans.size() == 0}" class="table table-hover">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Loan ID</th>
                <th scope="col">Name</th>
                <th scope="col">Book</th>
                <th scope="col">Start date</th>
                <th scope="col">End date</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr scope="row" th:each="loan : ${loans}">
                <td th:text="${loan.id}"></td>
                <td th:text="${loan.user.firstName + ' ' + loan.user.lastName}"></td>
                <td th:text="${loan.book.title}"></td>
                <td th:text="${loan.start_date}"></td>
                <td th:text="${loan.end_date}"></td>
                <td><a style="float:left;" th:href="@{/lib-dashboard/delete-loan/{loanId}(loanId=${loan.id})}" th:text="Delete"></a><a style="float: right;" th:href="@{/lib-dashboard/update-loan/{loanId}(loanId=${loan.id})}" th:text="Postpone"></a></td>
            </tr>
        </tbody>
    </table>
    <div th:if="${loans.size() == 0}"><h3 style="text-align:center;">Nothing found.</h3></div>
    <div th:unless="${loans.size() == 0}" class="d-flex">
        <ul class="pagination pagination-sm mx-auto" style="margin: 0 auto;">
            <a th:if="${currentPage > 1}" th:href="@{/lib-dashboard/loans/page/{pageNumber}(pageNumber = ${currentPage-1}, phrase = ${phrase})}"
               class="page-item page-link">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
            </a>
            <li class="page-item disabled"><a class="page-link" href="#" th:text="${currentPage}"></a></li>
            <a th:if="${currentPage != totalPages}" th:href="@{/lib-dashboard/loans/page/{pageNumber}(pageNumber = ${currentPage + 1}, phrase = ${phrase})}"
               class="page-link">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
            </a>
        </ul>
    </div>


</div>
</body>
</html>